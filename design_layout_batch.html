<!-- You must include this JavaScript file -->
<script src="https://assets.crowd.aws/crowd-html-elements.js"></script>

<!-- For the full list of available Crowd HTML Elements and their input/output documentation,
      please refer to https://docs.aws.amazon.com/sagemaker/latest/dg/sms-ui-template-reference.html -->

<!-- You must include crowd-form so that your task submits answers to MTurk -->
<crowd-form answer-format="flatten-objects">
<full-instructions header="Instructions">
    <p>
      In each of the subsequent screens, you will be shown a
      face image presented by a person trying to evade a face recognition system, 
      either by covering or altering some of their facial features or by presenting a mockup face instead. For each image, you need to answer two questions, in 8-30 words each. In one question you will be asked to describe what is used to mislead the face recognition system. In the other, you will be asked to describe why the presented face does not look genuine. In your answers, please use complete sentences. Also, please do not describe the natural (unaltered) characteristics of the face or provide details about the area surrounding the face. For example, if someone is holding a face picture in front of their face, do not say that the hands of the person are visible in the scene, 
      but instead focus on the face area of the image.
    </p>

    <h3>Disclaimer</h3>
    <p>
      Please, note that the validity of your answers will be checked. 
      Valid answers are expected to be relevant and meaningful. 
      AMT users with be rated based on the thoughtfulness of their answers.
    </p>
    
    <div style="display: inline-flex; align-items: stretch; justify-content: space-between;">
      <div style="width: 60%">
            <h3>Face Parts</h3>
            <p>
                  Along with a summary of the instructions above, with each sample, you will always be presented with the opposite diagram, which describes the face parts in case you need to use any of them in your responses.
            </p>
      </div>  
      <div style="width: 35%">
            <img width="100%" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/Face+sample.png" style="pointer-events: none;" /> 
      </div>
    </div>

    <br>
    <br>
    <h3>Sample</h3>
    <div style="display: inline-flex; align-items: stretch; justify-content: space-between;">
      <div style="width: 35%">
            <img width="100%" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/sample+question+face.jpg" style="pointer-events: none;" />
      </div> 
      <div style="width: 60%">
      <p><b>Question#1: Describe in detail the item or alteration that is being used to hide the identity of the person</b></p>
      <p style="color: #125488"><b>Your answer:  eyes are covered with opaque glasses with printed eyes, eyebrows, and blue eye shadows .</b></p>
  
       <p><b>Question#2: Describe why the item or alteration being used to hide the identity looks unnatural </b></p>
        <p style="color: #125488"><b>Your answer: it looks unnatural because of the flatness of the eyes and the mismatch between the eyebrows and 
              mismatch between the depth of the eye region and the cheeks.</b></p>
      </div>
    </div>
</full-instructions>

<short-instructions>
      <p>
            In each of the subsequent screens, you will be shown a
            face image presented by a person trying to evade a face recognition system, 
            either by covering or altering some of their facial features or by presenting a mockup face instead. For each image, you need to answer two questions, in 8-30 words each. In one question you will be asked to describe what is used to mislead the face recognition system. In the other, you will be asked to describe why the presented face does not look genuine. In your answers, please use complete sentences. Also, please do not describe the natural (unaltered) characteristics of the face or provide details about the area surrounding the face. For example, if someone is holding a face picture in front of their face, do not say that the hands of the person are visible in the scene, 
            but instead focus on the face area of the image.
          </p>
      
          <h3>Disclaimner</h3>
          <p>
            Please, note that the validity of your answers will be checked. 
            Valid answers are expected to be relevant and meaningful. 
            AMT users with be rated based on the thoughtfulness of their answers.
          </p>
          
          <h3>Face Parts</h3>
          <p>
            Along with a summary of the instructions above, with each sample, you will always be presented with the opposite diagram, which describes the face parts in case you need to use any of them in your responses.
          </p>
          <img width="100%" height="auto" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/Face+sample.png" style="pointer-events: none" />
      
    </short-instructions>
    <!-- Your image file URLs will be substituted for the "image_url" variable below
          when you publish a batch with a CSV input file containing multiple image file URLs.
          To preview the element with an example image, try setting the src attribute to
          "https://s3.amazonaws.com/cv-demo-images/basketball-outdoor.jpg" -->
    <!-- <img src="http://d3l6xw9j1xm30q.cloudfront.net/ID_8bd370f99ca265972ae9d907502ae87d5d71568c_x9367b48_FACE_WITHOUT_GLASS_1_m50010001Q94.jpg" style="max-width: 100%; max-height: 250px;  pointer-events: none" />-->
    <!-- <img src=${url_1} style="max-width: 100%; max-height: 250px;  pointer-events: none" /> -->
    <!-- <li style="color:rgb(0,0,255);"><strong>Suggested words:</strong></li> -->
      <p style="display: none" id="time_states"></p>
      <p style="display: none" id="current_page">1</p>
      <div id="question toggle"  style="display: none; width: 100%;">
      <div  style="display: inline-flex;justify-content: space-between; width: 100%;">
        <div width="10%">
        <button type="button" style="font-size: 12px;
        line-height: 20px;
        letter-spacing: 0.06px;
        padding: 0 20px 0 20px;
        height: 42px;
        margin: 0 8px 0 0;
        background-color: #ff9900;
        color: white;
        border-color: #125488;
        box-sizing: border-box;" onclick="prevPage()" id="prev">&#60; Prev</button></div>
            <p style="width: 50%; text-align: center; font-weight: bold;font-size: 1.5rem;margin-top: 0px;margin-bottom: 0px;">Time remaining: <strong id="timer"></strong></p>
            <div width="10%"><button style="font-size: 12px;
             line-height: 20px;
             letter-spacing: 0.06px;
             padding: 0 20px 0 20px;
             height: 42px;
             margin: 0 8px 0 0;
             background-color: #ff9900;
             color: white;
             border-color: #125488;
             box-sizing: border-box;" type="button" onclick="nextPage()" id="next">Next &#62;</button></div>
      </div>
      <div id="time-up" style="display: none; text-align: center; padding: 5%;">
        <h1>Your Time for this question is up!</h1>
     </div>
    </div>
      <div id="instructions" style="text-align: justify;">
            <center><h1>Instructions</h1></center>
            <p>
                  In each of the subsequent screens, you will be shown a
                  face image presented by a person trying to evade a face recognition system, 
                  either by covering or altering some of their facial features or by presenting a mockup face instead. For each image, you need to answer two questions, in 8-30 words each. In one question you will be asked to describe what is used to mislead the face recognition system. In the other, you will be asked to describe why the presented face does not look genuine. In your answers, please use complete sentences. Also, please do not describe the natural (unaltered) characteristics of the face or provide details about the area surrounding the face. For example, if someone is holding a face picture in front of their face, do not say that the hands of the person are visible in the scene, 
                  but instead focus on the face area of the image.
            </p>
            
            <h3>Disclaimer</h3>
            <p>
            Please, note that the validity of your answers will be checked. 
            Valid answers are expected to be relevant and meaningful. 
            AMT users with be rated based on the thoughtfulness of their answers.
            </p>
                
            <div style="display: inline-flex; align-items: stretch; justify-content: space-between;">
                  <div style="width: 60%">
                        <h3>Face Parts</h3>
                        <p>
                        Along with a summary of the instructions above, with each sample, you will always be presented with the opposite diagram, which describes the face parts in case you need to use any of them in your responses.
                        </p>
                  </div>  
                  <div style="width: 35%">
                        <img width="100%" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/Face+sample.png" style="pointer-events: none;" /> 
                  </div>
            </div>
            <br/>
            <center><button style="font-size: 12px;
                  line-height: 20px;
                  letter-spacing: 0.06px;
                  padding: 0 20px 0 20px;
                  height: 42px;
                  margin: 0 8px 0 0;
                  background-color: #ff9900;
                  color: white;
                  border-color: #125488;
                  box-sizing: border-box;" type="button" onclick="instructionContinue()">Continue</button></center>

      </div>
      <div id="sample" style="display: none;">
            <center><h1>Sample</h1></center>
            <div style="border-color: black; margin: 1%; padding: 1%;">
                  <div style="display: inline-flex; align-items: center;">
                        <div style="width: 40%">
                              <h3>Instructions:</h3>
                              <ul>
                                    <li>Use complete sentences in your answers.</li>
                                    <li>Your answer should be within 8-30 words.</li>
                                    <li>Do not describe unaltered face parts in the image or parts of the image surrounding the face region.</li>
                                    <li>The opposite diagram shows the face parts for your reference</li>
                              </ul>
                              </div>  
                        <div style="width: 35%">
                              <img width="100%" height="auto" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/Face+sample.png" style="pointer-events: none;" /> 
                        </div>
                  </div>
            </div>
            <div style="display: inline-flex; justify-content: space-between;">
                  <div style="width: 35%">
                        <img width="70%" style="margin-left: 10%; pointer-events: none;" height="auto" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/sample+question+face.jpg" />
                  </div> 
                  <div style="width: 60%">
                        <p><b>Question#1: Describe in detail the item or alteration that is being used to hide the identity of the person</b></p>
                        <p style="color: #125488"><b>Your answer:  eyes are covered with opaque glasses with printed eyes, eyebrows, and blue eye shadows .</b></p>
      
                        <p><b>Question#2: Describe why the item or alteration being used to hide the identity looks unnatural </b></p>
                        <p style="color: #125488"><b>Your answer: it looks unnatural because of the flatness of the eyes and the mismatch between the eyebrows and 
                              mismatch between the depth of the eye region and the cheeks.</b></p>
                  </div>
            </div>
            <center><button style="font-size: 12px;
                  line-height: 20px;
                  letter-spacing: 0.06px;
                  padding: 0 20px 0 20px;
                  height: 42px;
                  margin: 0 8px 0 0;
                  background-color: #ff9900;
                  color: white;
                  border-color: #125488;
                  box-sizing: border-box;" type="button" onclick="sampleContinue()">Continue</button></center>
      </div>
      <!-- <div id="q1" class="question"> -->
      <div id="q1" class="question" style="display: none">
            <div style="border-color: black; margin: 1%; padding: 1%;">
                  <div style="display: inline-flex; align-items: center;">
                        <div style="width: 40%">
                        <h3>Instructions:</h3>
                        <ul>
                              <li>Use complete sentences in your answers.</li>
                              <li>Your answer should be within 8-30 words.</li>
                              <li>Do not describe unaltered face parts in the image or parts of the image surrounding the face region.</li>
                              <li>The opposite diagram shows the face parts for your reference</li>
                        </ul>
                        </div>  
                        <div style="width: 35%">
                              <img width="100%" height="auto" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/Face+sample.png" style="pointer-events: none;"/> 
                        </div>
                  </div>
            </div>
            <div style="display: inline-flex; justify-content: space-between;width: 100%;">
            <div style="width: 35%">
                  <img width="70%" style="margin-left: 10%; pointer-events: none;" height="auto" src="${url_1}" />
            </div> 
            <div style="width: 60%">
            <p><b>Question#1: Describe in detail the item or alteration that is being used to hide the identity of the person</b></p>
            <p style="color: #125488"><b>Your answer:</b></p>
            <crowd-text-area name="question1_1" rows="4" style="background-color: white;border: solid 1px" required></crowd-text-area>
            <p><b>Question#2: Describe why the item or alteration being used to hide the identity looks unnatural </b></p>
            <p style="color: #125488"><b>Your answer:</b></p>
            <crowd-text-area name="question2_1" rows="4" required style="background-color: white; border: solid 1px;"></crowd-text-area>
            </div>
            </div>
      </div> 
      <div id="q2" class="question" style="display: none">
        <div style="border-color: black; margin: 1%; padding: 1%;">
              <div style="display: inline-flex; align-items: center;">
                    <div style="width: 40%">
                    <h3>Instructions:</h3>
                    <ul>
                          <li>Use complete sentences in your answers.</li>
                          <li>Your answer should be within 8-30 words.</li>
                          <li>Do not describe unaltered face parts in the image or parts of the image surrounding the face region.</li>
                          <li>The opposite diagram shows the face parts for your reference</li>
                    </ul>
                    </div>  
                    <div style="width: 35%">
                          <img width="100%" height="auto" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/Face+sample.png" style="pointer-events: none;"/> 
                    </div>
              </div>
        </div>
        <div style="display: inline-flex; justify-content: space-between;width: 100%;">
        <div style="width: 35%">
              <img width="70%" style="margin-left: 10%; pointer-events: none;" height="auto" src="${url_2}" />
        </div> 
        <div style="width: 60%">
        <p><b>Question#1: Describe in detail the item or alteration that is being used to hide the identity of the person</b></p>
        <p style="color: #125488"><b>Your answer:</b></p>
        <crowd-text-area name="question1_2" rows="4" style="background-color: white;border: solid 1px" required></crowd-text-area>
        <p><b>Question#2: Describe why the item or alteration being used to hide the identity looks unnatural </b></p>
        <p style="color: #125488"><b>Your answer:</b></p>
        <crowd-text-area name="question2_2" rows="4" required style="background-color: white; border: solid 1px;"></crowd-text-area>
        </div>
        </div>
  </div>  
  <div id="q3" class="question" style="display: none">
    <div style="border-color: black; margin: 1%; padding: 1%;">
          <div style="display: inline-flex; align-items: center;">
                <div style="width: 40%">
                <h3>Instructions:</h3>
                <ul>
                      <li>Use complete sentences in your answers.</li>
                      <li>Your answer should be within 8-30 words.</li>
                      <li>Do not describe unaltered face parts in the image or parts of the image surrounding the face region.</li>
                      <li>The opposite diagram shows the face parts for your reference</li>
                </ul>
                </div>  
                <div style="width: 35%">
                      <img width="100%" height="auto" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/Face+sample.png" style="pointer-events: none;"/> 
                </div>
          </div>
    </div>
    <div style="display: inline-flex; justify-content: space-between;width: 100%;">
    <div style="width: 35%">
          <img width="70%" style="margin-left: 10%; pointer-events: none;" height="auto" src="${url_3}" />
    </div> 
    <div style="width: 60%">
    <p><b>Question#1: Describe in detail the item or alteration that is being used to hide the identity of the person</b></p>
    <p style="color: #125488"><b>Your answer:</b></p>
    <crowd-text-area name="question1_3" rows="4" style="background-color: white;border: solid 1px" required></crowd-text-area>
    <p><b>Question#2: Describe why the item or alteration being used to hide the identity looks unnatural </b></p>
    <p style="color: #125488"><b>Your answer:</b></p>
    <crowd-text-area name="question2_3" rows="4" required style="background-color: white; border: solid 1px;"></crowd-text-area>
    </div>
    </div>
</div>
<div id="q4" class="question" style="display: none">
    <div style="border-color: black; margin: 1%; padding: 1%;">
          <div style="display: inline-flex; align-items: center;">
                <div style="width: 40%">
                <h3>Instructions:</h3>
                <ul>
                      <li>Use complete sentences in your answers.</li>
                      <li>Your answer should be within 8-30 words.</li>
                      <li>Do not describe unaltered face parts in the image or parts of the image surrounding the face region.</li>
                      <li>The opposite diagram shows the face parts for your reference</li>
                </ul>
                </div>  
                <div style="width: 35%">
                      <img width="100%" height="auto" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/Face+sample.png" style="pointer-events: none;"/> 
                </div>
          </div>
    </div>
    <div style="display: inline-flex; justify-content: space-between;width: 100%;">
    <div style="width: 35%">
          <img width="70%" style="margin-left: 10%; pointer-events: none;" height="auto" src="${url_4}" />
    </div> 
    <div style="width: 60%">
    <p><b>Question#1: Describe in detail the item or alteration that is being used to hide the identity of the person</b></p>
    <p style="color: #125488"><b>Your answer:</b></p>
    <crowd-text-area name="question1_4" rows="4" style="background-color: white;border: solid 1px" required></crowd-text-area>
    <p><b>Question#2: Describe why the item or alteration being used to hide the identity looks unnatural </b></p>
    <p style="color: #125488"><b>Your answer:</b></p>
    <crowd-text-area name="question2_4" rows="4" required style="background-color: white; border: solid 1px;"></crowd-text-area>
    </div>
    </div>
</div>
<div id="q5" class="question" style="display: none">
    <div style="border-color: black; margin: 1%; padding: 1%;">
          <div style="display: inline-flex; align-items: center;">
                <div style="width: 40%">
                <h3>Instructions:</h3>
                <ul>
                      <li>Use complete sentences in your answers.</li>
                      <li>Your answer should be within 8-30 words.</li>
                      <li>Do not describe unaltered face parts in the image or parts of the image surrounding the face region.</li>
                      <li>The opposite diagram shows the face parts for your reference</li>
                </ul>
                </div>  
                <div style="width: 35%">
                      <img width="100%" height="auto" src="https://custom-images-isi.s3.us-west-1.amazonaws.com/Face+sample.png" style="pointer-events: none;"/> 
                </div>
          </div>
    </div>
    <div style="display: inline-flex; justify-content: space-between;width: 100%;">
    <div style="width: 35%">
          <img width="70%" style="margin-left: 10%; pointer-events: none;" height="auto" src="${url_5}" />
    </div> 
    <div style="width: 60%">
    <p><b>Question#1: Describe in detail the item or alteration that is being used to hide the identity of the person</b></p>
    <p style="color: #125488"><b>Your answer:</b></p>
    <crowd-text-area name="question1_5" rows="4" style="background-color: white;border: solid 1px" required></crowd-text-area>
    <p><b>Question#2: Describe why the item or alteration being used to hide the identity looks unnatural </b></p>
    <p style="color: #125488"><b>Your answer:</b></p>
    <crowd-text-area name="question2_5" rows="4" required style="background-color: white; border: solid 1px;"></crowd-text-area>
    </div>
    </div>
</div> 
      <br>
      <br>
</crowd-form>
<script>
      function sampleContinue() {
            let sample = document.getElementById("sample")
            sample.style.display = "none";
            let time_states = document.getElementById("time_states");
            let time_State = []
            for(let i=0;i<=NUM_QUESTIONS; i += 1) {
                    time_State[i] = 600;
            }
            time_states.innerHTML = JSON.stringify(time_State);
            setCurrentPage(1);
            setTimer();
            let timercontrol = document.getElementById("question toggle")
            timercontrol.style.display = "block";
      }
      function instructionContinue() {
            let instruction = document.getElementById("instructions");
            instruction.style.display = "none";
            let sample = document.getElementById("sample")
            sample.style.display = "block";
      }
      const NUM_QUESTIONS = 5;
      var timer;
      function setNext(disabled) {
            let next_btn = document.getElementById("next");
            next_btn.style.display = disabled;
      }
      function setPrev(disabled) {
            let prev_btn = document.getElementById("prev");
            prev_btn.style.display = disabled;
      }
      function getCurrentPage() {
             let current_page = document.getElementById("current_page").innerHTML;
             current_page = Number.parseInt(current_page);
             return current_page;
      }
      function setCurrentPage(page) {
             let current_page = document.getElementById("current_page");
             current_page.innerHTML = page.toString();
             let questions = document.getElementsByClassName("question");
             let time_states = document.getElementById("time_states");
             time_states = JSON.parse(time_states.innerHTML);
             for(let i=0;i<questions.length; i += 1) {
                   const question = questions[i];
                   if(question.id != "q" + page.toString()) {
                        question.style.display = 'none';
                   } else if(time_states[page] > 0) {
                         question.style.display = 'block';
                        document.getElementById("time-up").style.display = "none";
                   } else {
                        question.style.display = 'none';
                        document.getElementById("time-up").style.display = "block";
                   }
             }
             setNext(page == NUM_QUESTIONS ? "none" : "block");
             setPrev(page == 1 ? "none" : "block");
      }
      function setTimeState(page) {
            let timer = document.getElementById("timer").innerHTML;
            timer = timer.split(':');
            let mins = Number.parseInt(timer[0])
            let secs = Number.parseInt(timer[1])
            let time_states = document.getElementById("time_states");
            timeStates = JSON.parse(time_states.innerHTML); 
            timeStates[page] = mins*60 + secs;
            time_states.innerHTML = JSON.stringify(timeStates);
      }
      function setTimer() {
            clearInterval(timer);
            let current_page = getCurrentPage();
            let time_states = document.getElementById("time_states");
            time_states = JSON.parse(time_states.innerHTML); 
            var init_time = time_states[current_page];
            let countDown = () => {
                  if(init_time < 0) {
                        setTimeState(current_page);
                        setCurrentPage(current_page);
                        clearInterval(timer);
                        init_time = 0;
                  }
                  mins = Math.floor(init_time / 60);
                  secs = init_time % 60;
                  let timerEle = document.getElementById("timer");
                  timerEle.innerHTML = mins.toString() + ":" + secs.toString();
                  init_time -= 1;
            };
            countDown();
            timer = setInterval(countDown, 1000);
      }
      function nextPage() {
            let current_page = getCurrentPage();
            setTimeState(current_page);
            setCurrentPage(current_page + 1);
            setTimer();
      }
      function prevPage() {
            let current_page = getCurrentPage();
            setTimeState(current_page);
            setCurrentPage(current_page - 1);
            setTimer();
      }
 </script>